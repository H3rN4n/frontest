!function(a){"use strict";function b(a,b){var c=Array.prototype.slice.call(b.children);return c.indexOf(a)}function c(){var b,c=a.querySelectorAll(".list-resources a"),d=0,e="",f="";for(d;d<c.length;d++)b=c[d].textContent,"css"===g(b)?e+='<link rel="stylesheet" href="'+c[d].href+'"/>':"js"===g(b)&&(f+='<script src="'+c[d].href+'"></script>');return{css:e,js:f}}function d(b,c,d){var e=a.createElement("li"),f=a.createElement("a"),g=a.createElement("span");f.setAttribute("href",c),f.setAttribute("target","_blank"),g.textContent="x",f.textContent=d,e.appendChild(f),e.appendChild(g),b.appendChild(e)}function e(a){var b=new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i");if(b.test(a)){var c=a.split("/").pop(-1),d=new RegExp("(.*?).(js|css)$");return d.test(c)?!0:!1}return!1}function f(a){return a.split("/").pop(-1)}function g(a){return a.split(".").pop(-1)}function h(){var a=ace.edit("editor");return a.setTheme("ace/theme/monokai"),a.getSession().setMode("ace/mode/html"),a.getSession().setUseWorker(!1),a}window.addEventListener("load",function(g){var i=h(),j=a.querySelector(".panel"),k=a.querySelector(".btn-add-resource"),l=[];i.$blockScrolling=1/0,chrome.storage.sync.get(function(b){if(b.editor&&i.setValue(b.editor,1),b.resources)for(var c=a.querySelector(".list-resources"),e=0;e<b.resources.length;e++){var g=b.resources[e];d(c,g,f(g)),l.push(g)}}),i.on("input",function(){chrome.storage.sync.set({editor:i.getValue()})}),j.addEventListener("submit",function(a){a.preventDefault(),c().css,c();var b="data:text/html, "+c().css+i.getValue()+c().js;chrome.tabs.create({url:b})}),k.addEventListener("click",function(b){b.preventDefault();var c=a.querySelector("#url-resource"),g=c.value,h=a.querySelector(".list-resources");e(g)?(c.classList.remove("error"),c.value="",d(h,g,f(g)),l.push(g),chrome.storage.sync.set({resources:l})):c.classList.add("error")}),a.querySelector(".list-resources").addEventListener("click",function(a){if("SPAN"===a.target.tagName){var c=b(a.target.parentElement,this);a.target.parentElement.remove(),-1!=c&&(l.splice(c,1),chrome.storage.sync.set({resources:l}))}}),a.querySelector(".icon-feedback").addEventListener("click",function(b){b.preventDefault();var c=a.querySelector(".content-feedback"),d=a.querySelector(".icon-feedback");c.classList.contains("active")?(c.classList.remove("active"),d.classList.remove("active")):(c.classList.add("active"),d.classList.add("active"))}),a.querySelector(".form-feedback").addEventListener("submit",function(b){b.preventDefault();var c=a.querySelector('[name="entry.430085320"]').value,d=a.querySelector(".thank-feedback"),e=new XMLHttpRequest;e.open("POST","https://docs.google.com/forms/d/1Q1MJW8D2ft1LmLt7JouuoZdJsfD2KT8YB4SR4_w4vGI/formResponse",!0),e.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),e.send("entry.430085320="+c),d.classList.add("active"),setTimeout(function(){a.querySelector(".content-feedback").classList.remove("active"),d.classList.remove("active")},2e3)}),a.querySelector(".panel").addEventListener("click",function(){var b=a.querySelector(".content-feedback"),c=a.querySelector(".icon-feedback");b.classList.contains("active")&&(b.classList.remove("active"),c.classList.remove("active"))})})}(this.document);